#!/usr/bin/env python3
import json
import re

# Đọc file tiếng Trung gốc
with open('src/i18n/locales/zh-TW.json', 'r', encoding='utf-8') as f:
    zh_data = json.load(f)

# Đọc file tiếng Việt hiện tại
with open('src/i18n/locales/vi.json', 'r', encoding='utf-8') as f:
    vi_data = json.load(f)

# Bản dịch cơ bản cho các từ tiếng Trung còn lại
basic_translations = {
    "活動": "hoạt động",
    "標題": "tiêu đề", 
    "描述": "mô tả",
    "候選人": "ứng viên",
    "已": "đã",
    "結束": "kết thúc",
    "暫無": "không có",
    "的": "của",
    "並": "và",
    "請": "vui lòng",
    "嘗試": "thử",
    "不同": "khác",
    "關鍵字": "từ khóa",
    "目前": "hiện tại",
    "稍後": "sau",
    "查看": "xem",
    "新": "mới",
    "參賽作品": "tác phẩm dự thi",
    "剩餘": "còn lại",
    "開始": "bắt đầu",
    "立即": "ngay lập tức",
    "結果": "kết quả",
    "準備": "chuẩn bị",
    "或": "hoặc",
    "即將": "sắp",
    "關閉": "đóng",
    "取消": "hủy",
    "草稿": "bản nháp",
    "載入": "tải",
    "失敗": "thất bại",
    "獲得": "nhận được",
    "移除": "xóa bỏ",
    "找不到": "không tìm thấy",
    "總": "tổng",
    "數": "số",
    "每次": "mỗi lần",
    "時間": "thời gian",
    "狀態": "trạng thái",
    "票": "phiếu",
    "想要": "muốn",
    "為": "cho",
    "喜愛": "yêu thích",
    "可": "có thể",
    "隨機": "ngẫu nhiên",
    "最多": "nhiều nhất",
    "最新": "mới nhất",
    "優先": "ưu tiên",
    "最舊": "cũ nhất",
    "此": "này",
    "任何": "bất kỳ",
    "可供": "có thể",
    "已達": "đã đạt",
    "最大": "tối đa",
    "尚未": "chưa",
    "最近": "gần đây",
    "者": "người",
    "更多": "thêm",
    "個人": "cá nhân",
    "資訊": "thông tin",
    "名字": "tên",
    "姓氏": "họ",
    "電話": "điện thoại",
    "地址": "địa chỉ",
    "頭像": "ảnh đại diện",
    "更換": "thay đổi",
    "更新": "cập nhật",
    "成功": "thành công",
    "連結": "liên kết",
    "複製": "sao chép",
    "剪貼簿": "bảng tạm",
    "發現": "phát hiện",
    "這個": "này",
    "很棒的": "tuyệt vời",
    "遊戲": "trò chơi",
    "一起": "cùng nhau",
    "獲勝": "thắng",
    "至少": "ít nhất",
    "需要": "cần",
    "個": "cái",
    "字元": "ký tự",
    "設定": "thiết lập",
    "中": "đang",
    "管理": "quản lý",
    "帳號": "tài khoản",
    "查看": "xem",
    "進度": "tiến độ",
    "追蹤": "theo dõi",
    "天": "ngày",
    "連續": "liên tục",
    "記錄": "ghi nhận",
    "交易": "giao dịch",
    "本月": "tháng này",
    "會員": "thành viên",
    "自": "từ",
    "歷史": "lịch sử",
    "收入": "thu nhập",
    "原因": "lý do",
    "備註": "ghi chú",
    "金額": "số tiền",
    "每頁": "mỗi trang",
    "列數": "số dòng",
    "頁面": "trang",
    "共": "tổng cộng",
    "尚無": "chưa có",
    "從": "từ",
    "或": "hoặc",
    "進行": "thực hiện",
    "開始": "bắt đầu",
    "您的": "của bạn",
    "代碼": "mã",
    "當": "khi",
    "朋友": "bạn bè",
    "加入": "tham gia",
    "時": "khi",
    "獲得": "nhận được",
    "額外": "thêm",
    "先": "trước",
    "與": "với",
    "分享": "chia sẻ",
    "他們": "họ",
    "你們": "các bạn",
    "都": "đều",
    "里程碑": "cột mốc",
    "獎勵": "phần thưởng",
    "再": "thêm",
    "可獲得": "có thể nhận được",
    "達到": "đạt được",
    "邀請": "mời",
    "加入於": "tham gia vào",
    "完成": "hoàn thành",
    "更改": "thay đổi",
    "字符": "ký tự",
    "全名": "tên đầy đủ",
    "輸入": "nhập",
    "電話號碼": "số điện thoại",
    "出生": "sinh",
    "性別": "giới tính",
    "選擇": "chọn",
    "男性": "nam",
    "女性": "nữ",
    "其他": "khác",
    "不願": "không muốn",
    "透露": "tiết lộ",
    "街道": "đường phố",
    "城市": "thành phố",
    "州": "bang",
    "省": "tỉnh",
    "郵遞區號": "mã bưu điện",
    "國家": "quốc gia",
    "變更": "thay đổi",
    "帳戶": "tài khoản",
    "自動": "tự động",
    "創建": "tạo",
    "這裡": "ở đây",
    "新": "mới",
    "目前": "hiện tại",
    "所有": "tất cả",
    "面向": "khía cạnh",
    "統計": "thống kê",
    "審查": "xem xét",
    "成員": "thành viên",
    "建立": "tạo",
    "任何": "bất kỳ",
    "常見": "thường gặp",
    "任務": "nhiệm vụ",
    "編輯": "chỉnh sửa",
    "用戶": "người dùng",
    "核准": "phê duyệt",
    "發放": "cấp",
    "系統": "hệ thống",
    "數量": "số lượng",
    "角色": "vai trò",
    "封鎖": "cấm",
    "撤銷": "hoàn tác",
    "詳情": "chi tiết",
    "資訊": "thông tin",
    "點數": "điểm",
    "成本": "chi phí",
    "正確": "đúng",
    "答案": "câu trả lời",
    "標記": "đánh dấu",
    "為": "là",
    "獎勵": "phần thưởng",
    "項目": "mục",
    "隱藏": "ẩn",
    "追蹤": "theo dõi",
    "表現": "hiệu suất",
    "依": "theo",
    "篩選": "lọc",
    "概覽": "tổng quan",
    "符合": "phù hợp",
    "條件": "điều kiện",
    "不同": "khác",
    "關鍵字": "từ khóa",
    "目前": "hiện tại",
    "稍後": "sau",
    "查看": "xem",
    "新": "mới",
    "參賽作品": "tác phẩm dự thi",
    "剩餘": "còn lại",
    "開始": "bắt đầu",
    "立即": "ngay lập tức",
    "結果": "kết quả",
    "準備": "chuẩn bị",
    "或": "hoặc",
    "即將": "sắp",
    "關閉": "đóng",
    "取消": "hủy",
    "草稿": "bản nháp",
    "載入": "tải",
    "失敗": "thất bại",
    "獲得": "nhận được",
    "移除": "xóa bỏ",
    "找不到": "không tìm thấy",
    "總": "tổng",
    "數": "số",
    "每次": "mỗi lần",
    "時間": "thời gian",
    "狀態": "trạng thái",
    "票": "phiếu",
    "想要": "muốn",
    "為": "cho",
    "喜愛": "yêu thích",
    "可": "có thể",
    "隨機": "ngẫu nhiên",
    "最多": "nhiều nhất",
    "最新": "mới nhất",
    "優先": "ưu tiên",
    "最舊": "cũ nhất",
    "此": "này",
    "任何": "bất kỳ",
    "可供": "có thể",
    "已達": "đã đạt",
    "最大": "tối đa",
    "尚未": "chưa",
    "最近": "gần đây",
    "者": "người",
    "更多": "thêm"
}

def translate_text(text):
    """Dịch văn bản từ tiếng Trung sang tiếng Việt"""
    if isinstance(text, str):
        # Tìm kiếm và thay thế các từ tiếng Trung
        for chinese, vietnamese in basic_translations.items():
            if chinese in text:
                text = text.replace(chinese, vietnamese)
        return text
    return text

def translate_object(obj):
    """Dịch đệ quy một object"""
    if isinstance(obj, dict):
        return {key: translate_object(value) for key, value in obj.items()}
    elif isinstance(obj, list):
        return [translate_object(item) for item in obj]
    elif isinstance(obj, str):
        return translate_text(obj)
    else:
        return obj

# Dịch toàn bộ dữ liệu
vi_data = translate_object(zh_data)

# Thêm tiếng Việt vào common
vi_data['common']['vietnamese'] = 'Tiếng Việt'

# Ghi file tiếng Việt
with open('src/i18n/locales/vi.json', 'w', encoding='utf-8') as f:
    json.dump(vi_data, f, ensure_ascii=False, indent=2)

print("Đã dịch xong file tiếng Việt hoàn chỉnh!")
